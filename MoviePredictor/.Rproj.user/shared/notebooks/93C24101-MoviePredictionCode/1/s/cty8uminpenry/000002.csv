"0","# preprocessing data"
"0","genres <- as.data.frame(movies$genres, stringsAsFactors = FALSE)"
"0","genres2 <- as.data.frame(tstrsplit( genres[,1], '[|]',"
"0","                                    type.convert=TRUE),"
"0","                                    stringsAsFactors=FALSE)"
"0","colnames(genres2) <- c(1:10)"
"0","genre_list <- c(""Action"", ""Adventure"", ""Animation"", ""Children"", "
"0","                ""Comedy"", ""Crime"",""Documentary"", ""Drama"", ""Fantasy"","
"0","                ""Film-Noir"", ""Horror"", ""Musical"", ""Mystery"",""Romance"","
"0","                ""Sci-Fi"", ""Thriller"", ""War"", ""Western"") #list of all the genres"
"0","genre_matrix <-matrix(0, nrow(movies)+1, length(genre_list)) #empty matrix, no movies + 1, no genres"
"0","genre_matrix[1,] <- genre_list # populate genres in first row"
"0","colnames(genre_matrix) <- genre_list # set column names with genre list"
"0","#iterate through matrix"
"0","for (i in 1:nrow(genres2)) {"
"0","  for (c in 1:ncol(genres2)) {"
"0","    genmat_col = which(genre_matrix[1,] == genres2[i,c])"
"0","    genre_matrix[i+1,genmat_col] <- 1"
"0","  }"
"0","}"
"0","#convert into dataframe"
"0","genre_matrix2 <- as.data.frame(genre_matrix[-1,], stringsAsFactors=FALSE) #remove first row, which was the genre list"
"0","for (c in 1:ncol(genre_matrix2)) {"
"0","  genre_matrix2[,c] <- as.integer(genre_matrix2[,c])"
"0","} #convert from characters to integers"
"0","#Create a matrix to search for a movie by genre:"
"0","years <- as.data.frame(movies$title, stringsAsFactors=FALSE)"
"0","library(data.table)"
"0","substrRight <- function(x, n){"
"0","  substr(x, nchar(x)-n+1, nchar(x))"
"0","}"
"0","years <- as.data.frame(substr(substrRight(substrRight(years$`movies$title`, 6),5),1,4))"
"0","search_matrix <- cbind(movies[,1], substr(movies[,2],1,nchar(movies[,2])-6), years, genre_matrix2)"
"0","colnames(search_matrix) <- c(""movieId"", ""title"", ""year"", genre_list)"
"0","write.csv(search_matrix, ""search.csv"")"
"0","search_matrix <- read.csv(""search.csv"", stringsAsFactors=FALSE)"
"0","# at this point we can search for movies with the following:"
"0","#subset(search_matrix, Crime ==1 & year == 2019)$title"
